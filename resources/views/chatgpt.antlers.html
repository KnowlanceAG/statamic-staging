<style>
    .btn-analyze {
        background-color: #f57c00;
        color: white;
        border: none;
        position: relative;
        float: right;
    }

    .btn-analyze:hover,
    .btn-analyze:focus {
        background-color: #fb8c00;
        color: white;
    }

    .loading-text {
        display: none;
    }

    .btn-analyze.loading .loading-text {
        display: inline;
    }

    .btn-analyze.loading .submit-text {
        display: none;
    }

    /* Custom Styling for Radio Buttons */
    .custom-control-input:checked~.custom-control-label::before {
        color: #fff;
        border-color: #f57c00;
        background-color: #f57c00;
        /* Orange background */
    }

    .custom-control-input:focus~.custom-control-label::before {
        box-shadow: 0 0 0 0.2rem rgba(245, 124, 0, 0.5);
        /* Orange shadow for focus */
    }

    .custom-control-input:not(:disabled):active~.custom-control-label::before {
        color: #fff;
        background-color: #fb8c00;
        /* Lighter orange for active state */
        border-color: #fb8c00;
    }

    .custom-control-label::before {
        border-radius: 50%;
        border: 1px solid #ced4da;
        /* Default border color */
        background-color: #fff;
        /* Default background color */
    }

    .custom-control-label::after {
        border-radius: 50%;
    }

    /* Orange Theme Styles */
    .btn-custom,
    .btn-custom:hover,
    .btn-custom:focus {
        background-color: #f57c00;
        /* Orange */
        color: white;
        border: none;
    }

    .form-control:focus,
    .custom-file-label:hover,
    .custom-select:focus {
        border-color: #fb8c00;
        box-shadow: 0 0 0 0.2rem rgba(245, 124, 0, 0.25);
        /* Lighter orange shadow */
    }

    /* General styles for the range input */
    input[type="range"] {
        -webkit-appearance: none;
        width: 100%;
        height: 8px;
        border-radius: 5px;
        outline: none;
        padding: 0;
        margin: 0;
    }

    /* Webkit browsers */
    input[type="range"]::-webkit-slider-runnable-track {
        width: 100%;
        height: 8px;
        cursor: pointer;
        border-radius: 5px;
    }

    input[type="range"]::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 20px;
        height: 20px;
        background: #f57c00;
        cursor: pointer;
        border-radius: 50%;
        margin-top: -6px;
        /* Align the thumb with the track */
    }

    /* Firefox */
    input[type="range"]::-moz-range-track {
        width: 100%;
        height: 8px;
        cursor: pointer;
        border-radius: 5px;
    }

    input[type="range"]::-moz-range-thumb {
        width: 20px;
        height: 20px;
        background: #f57c00;
        cursor: pointer;
        border-radius: 50%;
    }

    /* Internet Explorer */
    input[type="range"]::-ms-track {
        width: 100%;
        height: 8px;
        cursor: pointer;
        background: transparent;
        border-color: transparent;
        color: transparent;
    }

    input[type="range"]::-ms-fill-lower {
        border-radius: 5px;
    }

    input[type="range"]::-ms-fill-upper {
        border-radius: 5px;
    }

    input[type="range"]::-ms-thumb {
        width: 20px;
        height: 20px;
        background: #f57c00;
        cursor: pointer;
        border-radius: 50%;
    }

    .btn-analyze.loading .submit-text {
        display: none;
    }

    .btn-analyze.loading .loading-text {
        display: inline;
    }
</style>
<section class="py-24 px-4 max-w-screen">
    <div class="content container mx-auto max-w-screen-xl clear-both">
        <div class="lg:grid lg:grid-cols-1 lg:gap-8">
            <div class="lg:col-span-2">

                {{ replicator }}
                {{ partial src="partials/content/{type}" }}
                {{ /replicator }}

                <div class="w-full pt-6 pb-12 px-2 sm:px-6 lg:pt-8 lg:pb-16 lg:px-8 bg-gray-200">
                    <form id="chatgptForm">
                        {{ csrf_field }}

                        <div class="form-group mb-6">
                            <div class="grid grid-cols-1 gap-4 md:grid-cols-4">
                                <div>
                                    <label class="block uppercase tracking-wide text-black text-xs mt-4 mb-1"
                                        for="action">
                                        Action
                                        <sup class="text-red-500">*</sup>
                                    </label>
                                    <div class="flex items-center">
                                        <input type="radio" id="actionSummarize" name="action" value="Summarize"
                                            class="h-4 w-4 border-gray-300 text-orange-500 focus:ring-orange-500" checked>
                                        <label class="ml-3 block text-sm font-medium leading-6 text-gray-900"
                                            for="actionSummarize">Summarize</label>
                                    </div>
                                    <div class="flex items-center">
                                        <input type="radio" id="actionQuestion" name="action" value="Question"
                                            class="h-4 w-4 border-gray-300 text-orange-500 focus:ring-orange-500">
                                        <label class="ml-3 block text-sm font-medium leading-6 text-gray-900"
                                            for="actionQuestion">Question</label>
                                    </div>
                                    <div class="flex items-center">
                                        <input type="radio" id="actionTranslate" name="action" value="Translate"
                                            class="h-4 w-4 border-gray-300 text-orange-500 focus:ring-orange-500">
                                        <label class="ml-3 block text-sm font-medium leading-6 text-gray-900"
                                            for="actionTranslate">Translate</label>
                                    </div>
                                </div>
                                <div>
                                    <label class="block uppercase tracking-wide text-black text-xs mt-4 mb-1"
                                        for="mode">
                                        Mode
                                        <sup class="text-red-500">*</sup>
                                    </label>
                                    <div class="flex items-center">
                                        <input type="radio" id="paragraph" name="mode" value="Paragraph"
                                            class="h-4 w-4 border-gray-300 text-orange-500 focus:ring-orange-500" checked>
                                        <label class="ml-3 block text-sm font-medium leading-6 text-gray-900"
                                            for="paragraph">Paragraph</label>
                                    </div>
                                    <div class="flex items-center">
                                        <input type="radio" id="bullet-points" name="mode" value="Bullet Points"
                                            class="h-4 w-4 border-gray-300 text-orange-500 focus:ring-orange-500">
                                        <label class="ml-3 block text-sm font-medium leading-6 text-gray-900"
                                            for="bullet-points">Bullet Points</label>
                                    </div>
                                </div>
                                <div>
                                    <label class="block uppercase tracking-wide text-black text-xs mt-4 mb-1"
                                        for="synonyms">
                                        Use Synonyms
                                        <sup class="text-red-500">*</sup>
                                    </label>
                                    <div class="flex items-center">
                                        <input type="radio" id="synonymsYes" name="synonyms" value="Yes"
                                            class="h-4 w-4 border-gray-300 text-orange-500 focus:ring-orange-500">
                                        <label class="ml-3 block text-sm font-medium leading-6 text-gray-900"
                                            for="synonymsYes">Yes</label>
                                    </div>
                                    <div class="flex items-center">
                                        <input type="radio" id="synonymsNo" name="synonyms" value="No"
                                            class="h-4 w-4 border-gray-300 text-orange-500 focus:ring-orange-500">
                                        <label class="ml-3 block text-sm font-medium leading-6 text-gray-900"
                                            for="synonymsNo">No</label>
                                    </div>
                                </div>
                                <div>
                                    <label class="block uppercase tracking-wide text-black text-xs mt-4 mb-1"
                                        for="language">
                                        Language
                                        <sup class="text-red-500">*</sup>
                                    </label>
                                    <div style="padding-top: 10px;">
                                        <select class="form-control custom-select" id="language" name="language">
                                            <option value="English">English</option>
                                            <option value="German">German</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>


                        <div class="form-group mb-6">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                                <div>
                                    <label class="block uppercase tracking-wide text-black text-xs mt-4 mb-1"
                                        for="length">
                                        Length
                                        <sup class="text-red-500">*</sup>
                                    </label>
                                    <input type="range" class="custom-range" id="length" name="length" min="1" max="5"
                                        value="3" step="1">
                                    <div class="flex justify-between text-xs mt-2">
                                        <span>1</span>
                                        <span>2</span>
                                        <span>3</span>
                                        <span>4</span>
                                        <span>5</span>
                                    </div>
                                </div>

                                <div>
                                    <label class="block uppercase tracking-wide text-black text-xs mt-4 mb-1"
                                        for="toneOfVoice">
                                        Tone of Voice
                                        <sup class="text-red-500">*</sup>
                                    </label>
                                    <div style="padding-top: 10px;">
                                        <select class="form-control custom-select" id="toneOfVoice" name="toneOfVoice">
                                            <option value="Normal">Normal</option>
                                            <option value="Formal">Formal</option>
                                            <option value="Informal">Informal</option>
                                            <option value="Academic">Academic</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="form-group mb-6">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                                <div>
                                    <a href="#" type="submit" id="submitButton"
                                        class="inline-block px-4 py-2 mt-2 text-white uppercase transition-colors duration-200 bg-orange-500 font-300 hover:bg-orange-700 inquiry-btn btn-analyze">
                                        <span class="submit-text">Analyze</span>
                                        <span class="loading-text">Loading<span id="loading-dots">...</span></span>
                                    </a>
                                    <label class="block uppercase tracking-wide text-black text-xs mt-4 mb-1"
                                        for="userMessage">
                                        User Message
                                        <sup class="text-red-500">*</sup>
                                    </label>
                                    <div style="padding-top: 10px;">
                                        <textarea id="userMessage" name="userMessage" rows="5"></textarea>
                                    </div>
                                </div>
                                <div>
                                    <label class="block uppercase tracking-wide text-black text-xs mt-4 mb-1"
                                        for="response">
                                        Response
                                    </label>
                                    <div id="responseContainer"
                                        style="margin-top:2.5%;padding-top: 10px;background-color: #e2e3e5;position: relative;padding: .75rem 1.25rem;margin-bottom: 1rem;border: 1px solid transparent;border-radius: .25rem;">
                                        <div class="alert alert-info">No response yet. Please submit a request.</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>

                <script>
                    const rangeInput = document.getElementById('length');

                    function updateRangeBackground() {
                        const min = rangeInput.min;
                        const max = rangeInput.max;
                        const val = rangeInput.value;
                        const percentage = (val - min) / (max - min) * 100;

                        rangeInput.style.background = `linear-gradient(to right, #f57c00 ${percentage}%, #ddd ${percentage}%)`;
                    }

                    rangeInput.addEventListener('input', updateRangeBackground);

                    // Initialize the background on page load
                    updateRangeBackground();
                </script>

                <script>
                    document.addEventListener('DOMContentLoaded', function () {
                        var loadingDotsInterval;

                        document.getElementById('submitButton').addEventListener('click', function (e) {
                            e.preventDefault();
                            var form = document.getElementById('chatgptForm');
                            var button = document.getElementById('submitButton');
                            button.classList.add('loading');

                            var dots = 1;
                            loadingDotsInterval = setInterval(function () {
                                dots = (dots % 3) + 1;
                                document.getElementById('loading-dots').textContent = '.'.repeat(dots);
                            }, 500);

                            var xhr = new XMLHttpRequest();
                            xhr.open('POST', '{{ route:form.handle name="chatgpt" }}', true);
                            xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');

                            xhr.onload = function () {
                                clearInterval(loadingDotsInterval);
                                button.classList.remove('loading');
                                if (xhr.status === 200) {
                                    var response = JSON.parse(xhr.responseText);
                                    document.getElementById('responseContainer').innerHTML = '<div class="alert alert-info">' + response.response + '</div>';
                                } else {
                                    document.getElementById('responseContainer').innerHTML = '<div class="alert alert-danger">An error occurred. Please try again.</div>';
                                }
                            };

                            xhr.onerror = function () {
                                clearInterval(loadingDotsInterval);
                                button.classList.remove('loading');
                                console.error('Error: ' + xhr.statusText);
                                document.getElementById('responseContainer').innerHTML = '<div class="alert alert-danger">An error occurred. Please try again.</div>';
                            };

                            var formData = new FormData(form);
                            var formParams = new URLSearchParams(formData).toString();
                            xhr.send(formParams);
                        });

                        document.querySelectorAll('input[name="action"]').forEach(function (input) {
                            input.addEventListener('change', function () {
                                if (document.getElementById('actionQuestion').checked) {
                                    document.getElementById('questionField').style.display = 'block';
                                } else {
                                    document.getElementById('questionField').style.display = 'none';
                                }
                            });
                        });
                    });
                </script>
            </div>
        </div>
    </div>
</section>